ports:
- location: eth1
  name: p1
- location: eth2
  name: p2

devices:
- name: otg1
  ethernets:
  - name: otg1.eth[0]
    connection:
      choice: port_name
      port_name: p1
    ipv4_addresses:
    - name: otg1.eth[0].ipv4[0]
      gateway: 192.0.2.2
      address: 192.0.2.1
      prefix: 30
    mac: 02:00:00:00:01:aa
    mtu: 1500

- name: otg2
  ethernets:
  - name: otg2.eth[0]
    connection:
      choice: port_name
      port_name: p2
    ipv4_addresses:
    - name: otg2.eth[0].ipv4[0]
      gateway: 192.0.2.1
      address: 192.0.2.2
      prefix: 30
    mac: 02:00:00:00:02:aa
    mtu: 1500

flows:
- name: f1
  tx_rx:
    choice: device
    device:
      mode: mesh
      tx_names:
      - otg1.eth[0].ipv4[0]
      rx_names:
      - otg2.eth[0].ipv4[0]
  size:
    choice: fixed
    fixed: 256
  rate:
    choice: pps
    pps: 10
  duration:
    choice: fixed_packets
    fixed_packets:
      packets: 100
      # gap: 12
  metrics:
    enable: true
    loss: false
    timestamps: false
